<!DOCTYPE html>
<html lang="en">
<head> 
    <link rel="manifest" href="https://devilboyap.github.io/deskdoc/manifest.json">
<meta name="theme-color" content="#2c3e50">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deskdoc - Patient Management</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --light: #f4f7f6;
            --white: #ffffff;
            --danger: #e74c3c;
            --success: #27ae60;
            --highlight: #f1c40f;
            --pending: #95a5a6;
            --ongoing: #e67e22;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--light); padding-bottom: 60px; color: var(--primary); }
        header { background: var(--primary); color: var(--white); padding: 1.2rem; text-align: center; position: sticky; top: 0; z-index: 1000; box-shadow: var(--shadow); }
        .container { max-width: 1200px; margin: 0 auto; padding: 15px; }

        .tabs { display: flex; background: var(--white); position: sticky; top: 65px; z-index: 999; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .tab { flex: 1; text-align: center; padding: 15px; font-weight: bold; color: #95a5a6; cursor: pointer; transition: 0.3s; }
        .active-tab { color: var(--accent); border-bottom: 4px solid var(--accent); background: rgba(52, 152, 219, 0.05); }

        .responsive-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        @media (min-width: 900px) { .responsive-grid { grid-template-columns: 1fr 1fr; } .full-width { grid-column: span 2; } }

        .card { background: var(--white); padding: 20px; border-radius: 12px; box-shadow: var(--shadow); margin-bottom: 10px; }
        h2 { margin-top: 0; font-size: 1.1rem; color: var(--primary); border-left: 4px solid var(--accent); padding-left: 10px; }

        input, button, textarea, select { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        button { background: var(--accent); color: var(--white); border: none; font-weight: bold; cursor: pointer; }

        .calendar-grid { display: grid !important; grid-template-columns: repeat(7, 1fr) !important; gap: 5px; background: #eee; border: 1px solid #ddd; }
        .weekday { background: #ecf0f1; font-weight: bold; font-size: 0.8rem; padding: 10px 0; text-align: center; }
        .day { background: var(--white); display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 1rem; cursor: pointer; position: relative; min-height: 50px; border: 2px solid transparent; }
        .today { background: var(--accent) !important; color: white !important; font-weight: bold; }
        .selected-day { border: 2px solid var(--highlight) !important; }
        .apt-count { background: var(--highlight); color: #000; font-size: 0.7rem; padding: 2px 6px; border-radius: 10px; margin-top: 4px; font-weight: bold; }

        .item { border-left: 5px solid var(--accent); background: #fff; padding: 15px; margin-bottom: 10px; border-radius: 0 8px 8px 0; display: flex; justify-content: space-between; align-items: flex-start; }
        .status-tag { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: bold; color: white; text-transform: uppercase; margin-bottom: 5px; }
        .st-pending { background: var(--pending); }
        .st-ongoing { background: var(--ongoing); }
        .st-completed { background: var(--success); }
        .st-cancel { background: var(--danger); }

        .action-btns { display: flex; flex-direction: column; gap: 5px; }
        .btn-action { width: 85px; padding: 8px; font-size: 0.7rem; border-radius: 6px; }

        .stats-bar { background: var(--primary); color: white; padding: 15px; border-radius: 12px; display: flex; justify-content: space-around; text-align: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
        .stat-item div:first-child { font-size: 0.75rem; opacity: 0.8; }
        .stat-item div:last-child { font-size: 1.1rem; font-weight: bold; }

        #invoice-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            z-index: 2000;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        @media print {
            body > *:not(#invoice-overlay) { display: none !important; }
            #invoice-overlay { display: block !important; position: relative; padding: 0; }
            .no-print { display: none !important; }
        }
        
        /* Jump to date styles */
        .jump-btn { background: none; color: var(--primary); padding: 0; width: auto; font-size: 1.2rem; cursor: pointer; border-radius: 5px; }
        .jump-btn:hover { color: var(--accent); }
    </style>
</head>
<body>

<header>
    <h1>Deskdoc</h1>
</header>

<div class="tabs no-print">
    <div id="tab1" class="tab active-tab" onclick="showPage('booking')">Booking</div>
    <div id="tab2" class="tab" onclick="showPage('storage')">History</div>
    <div id="tab3" class="tab" onclick="showPage('billing')">Revenue</div>
</div>

<div class="container no-print">
    <div id="bookingPage">
        <div class="responsive-grid">
            <div class="card">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                    <button onclick="changeMonth(-1)" style="width:auto; padding:5px 15px;">&lt;</button>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <h2 id="monthDisplay" style="border:none; margin:0;"></h2>
                        <button class="jump-btn" onclick="document.getElementById('jumpPicker').showPicker()" title="Jump to Date">ðŸ“…</button>
                        <input type="month" id="jumpPicker" style="position: absolute; opacity: 0; pointer-events: none; width: 0;" onchange="jumpToDate(this.value)">
                    </div>
                    <button onclick="changeMonth(1)" style="width:auto; padding:5px 15px;">&gt;</button>
                </div>
                <div class="calendar-grid">
                    <div class="weekday">Su</div><div class="weekday">Mo</div><div class="weekday">Tu</div>
                    <div class="weekday">We</div><div class="weekday">Th</div><div class="weekday">Fr</div>
                    <div class="weekday">Sa</div>
                </div>
                <div id="calendar" class="calendar-grid"></div>
            </div>

            <div class="card">
                <h2 id="formTitle">Patient Intake</h2>
                <select id="clinicSelect">
                    <option value="">-- Select Saved Clinic --</option>
                </select>
                <input type="text" id="pName" placeholder="Patient Full Name">
                <input type="tel" id="pPhone" placeholder="Mobile Number">
                <div style="display:flex; gap:10px;">
                    <input type="date" id="pDate" onchange="syncCalendarWithPicker(this.value); renderPatients();">
                    <input type="time" id="pTime">
                </div>
                <div style="display:flex; gap:10px;">
                    <input type="number" id="pFee" placeholder="Total Fee">
                    <input type="number" id="pPaid" placeholder="Paid">
                </div>
                <select id="pStatus">
                    <option value="pending">Pending</option>
                    <option value="ongoing">Ongoing</option>
                    <option value="completed">Completed</option>
                    <option value="cancel">Cancelled</option>
                </select>
                <textarea id="pCondition" placeholder="Diagnosis / Notes" rows="2"></textarea>
                <button id="saveBtn" onclick="savePatient()">Save to Deskdoc</button>
                <button id="cancelEdit" style="display:none; background:#95a5a6;" onclick="resetForm()">Cancel</button>
            </div>

            <div class="card full-width">
                <h2 id="listHeader">Schedule <button onclick="refreshApp()" style="width:auto; padding:5px 10px; font-size:10px; float:right;">Today</button></h2>
                <div id="patientList"></div>
            </div>
        </div>
    </div>

    <div id="storagePage" style="display:none;">
        <div class="stats-bar">
            <div class="stat-item"><div>Total Patients</div><div id="totalCountDisplay">0</div></div>
            <div style="display:flex; gap:5px;">
                <button onclick="exportToCSV()" style="width:auto; background:var(--success); padding:8px 15px; border-radius:8px;">Export</button>
                <button onclick="document.getElementById('importFile').click()" style="width:auto; background:var(--highlight); color:black; padding:8px 15px; border-radius:8px;">Import</button>
                <input type="file" id="importFile" style="display:none" accept=".csv" onchange="importFromCSV(event)">
            </div>
        </div>
        
        <div class="card">
            <h2>Manage Clinics</h2>
            <div style="display:flex; gap:10px;">
                <input type="text" id="newClinicInput" placeholder="Add New Clinic Name" style="margin:0;">
                <button onclick="addClinic()" style="width:auto; padding:0 20px;">Add</button>
            </div>
            <div id="clinicList" style="margin-top:10px;"></div>
        </div>

        <div class="card">
            <input type="text" id="searchInput" placeholder="Search records by name..." onkeyup="applyFilters()">
            <div id="fullDatabaseList"></div>
        </div>

        <div class="card" style="background: #f8f9fa; border: 1px solid #ddd; text-align: center;">
            <h2 style="border:none; text-align:center;">App Support</h2>
            <p style="font-size: 0.9rem;">Deskdoc v1.0 | Developer: Apurba Deb</p>
            <p style="font-size: 0.85rem; color: #555;">Email: officialdeskdoc@gmail.com</p>
        </div>

        <div class="card" style="border: 2px solid var(--danger); background: #fff5f5;">
            <h2 style="color: var(--danger); border-left-color: var(--danger);">Danger Zone</h2>
            <p style="font-size: 0.85rem; margin-bottom: 15px;">Warning: This will permanently delete all patient data and clinic names. Export your data before resetting.</p>
            <button onclick="factoryReset()" style="background: var(--danger); width: auto; padding: 10px 25px;">Reset All App Data</button>
        </div>
    </div>

    <div id="billingPage" style="display:none;">
        <div class="stats-bar">
            <div class="stat-item"><div>Revenue</div><div id="totalRevenue">0</div></div>
            <div class="stat-item"><div>Collected</div><div id="totalCollected">0</div></div>
            <div class="stat-item"><div>Dues</div><div id="totalDues">0</div></div>
        </div>
        <div id="billingList"></div>
    </div>
</div>

<div id="invoice-overlay">
    <button class="no-print" onclick="closeInvoice()" style="background:var(--danger); width:auto; padding:10px 20px; margin-bottom:20px;">Back to App</button>
    <button class="no-print" onclick="window.print()" style="background:var(--success); width:auto; padding:10px 20px; margin-bottom:20px; float:right;">Confirm Print / PDF</button>
    
    <div style="clear:both; border:1px solid #ccc; padding:30px; background:white;">
        <div style="text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 20px;">
            <h1 id="inv-clinic" style="margin: 0; color: #2c3e50; text-transform: uppercase;">CLINIC NAME</h1>
            <p style="margin: 5px 0;">Official Patient Receipt</p>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 30px;">
            <div>
                <p><strong>Patient:</strong> <span id="inv-name"></span></p>
                <p><strong>Contact:</strong> <span id="inv-phone"></span></p>
            </div>
            <div style="text-align: right;">
                <p><strong>Date:</strong> <span id="inv-date"></span></p>
                <p><strong>Time:</strong> <span id="inv-time"></span></p>
            </div>
        </div>
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 30px;">
            <thead>
                <tr style="background: #eee;">
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: left;">Service Description</th>
                    <th style="border: 1px solid #ddd; padding: 12px; text-align: right;">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="border: 1px solid #ddd; padding: 12px;">Consultation / Treatment Session</td>
                    <td style="border: 1px solid #ddd; padding: 12px; text-align: right;" id="inv-fee">0</td>
                </tr>
                <tr style="font-weight: bold;">
                    <td style="border: 1px solid #ddd; padding: 12px; text-align: right;">Total Paid:</td>
                    <td style="border: 1px solid #ddd; padding: 12px; text-align: right; color: green;" id="inv-paid">0</td>
                </tr>
                <tr style="font-weight: bold;">
                    <td style="border: 1px solid #ddd; padding: 12px; text-align: right;">Balance Due:</td>
                    <td style="border: 1px solid #ddd; padding: 12px; text-align: right; color: red;" id="inv-due">0</td>
                </tr>
            </tbody>
        </table>
        <div style="margin-top: 50px; text-align: center;">
            <p>Thank you for choosing our services. Wish you a speedy recovery!</p>
            <p style="font-size: 0.8rem; color: #999;">System: Deskdoc Management App</p>
            <div style="margin-top: 40px; border-top: 1px solid #ccc; width: 200px; margin-left: auto; margin-right: auto; padding-top: 5px;">Authorized Signature</div>
        </div>
    </div>
</div>

<script>
const _0x2b2d05=_0x3eca;(function(_0x3f92c8,_0x2d3168){const _0x26ef78=_0x3eca,_0x5c6096=_0x3f92c8();while(!![]){try{const _0x2b729b=parseInt(_0x26ef78(0x188))/0x1+-parseInt(_0x26ef78(0x190))/0x2+parseInt(_0x26ef78(0x149))/0x3*(parseInt(_0x26ef78(0x19a))/0x4)+-parseInt(_0x26ef78(0x1b0))/0x5+-parseInt(_0x26ef78(0x130))/0x6+parseInt(_0x26ef78(0x15a))/0x7*(parseInt(_0x26ef78(0x177))/0x8)+parseInt(_0x26ef78(0x182))/0x9*(parseInt(_0x26ef78(0x15c))/0xa);if(_0x2b729b===_0x2d3168)break;else _0x5c6096['push'](_0x5c6096['shift']());}catch(_0x48b60c){_0x5c6096['push'](_0x5c6096['shift']());}}}(_0x5331,0x43a81));function generateSecureKey(_0x4b906a){const _0x3776db=_0x3eca,_0x137cb0=_0x3776db(0x1ae);let _0x219697=_0x4b906a+_0x137cb0,_0x577383=_0x219697[_0x3776db(0x124)]('')[_0x3776db(0x11a)]()[_0x3776db(0x17d)]((_0x40b72b,_0x581ddb)=>{const _0x4f9f44=_0x3776db;return _0x581ddb%0x2===0x0?_0x40b72b[_0x4f9f44(0x1b5)](0x0)[_0x4f9f44(0x176)](0x10):_0x40b72b;})[_0x3776db(0x1a3)]('');return _0x577383[_0x3776db(0x1b2)](0x0,0xc)[_0x3776db(0x121)]();}let deviceID=localStorage[_0x2b2d05(0x185)](_0x2b2d05(0x166));!deviceID&&(deviceID=_0x2b2d05(0x19f)+Math['random']()[_0x2b2d05(0x176)](0x24)['substr'](0x2,0x6)[_0x2b2d05(0x121)](),localStorage[_0x2b2d05(0x13a)](_0x2b2d05(0x166),deviceID));if(localStorage[_0x2b2d05(0x185)]('deskdoc_unlocked')!=='true'){let userKey=prompt(_0x2b2d05(0x14c)+deviceID+_0x2b2d05(0x145));if(userKey===generateSecureKey(deviceID))localStorage[_0x2b2d05(0x13a)](_0x2b2d05(0x16d),_0x2b2d05(0x17c)),alert(_0x2b2d05(0x153));else{document[_0x2b2d05(0x156)]['innerHTML']=_0x2b2d05(0x12d)+deviceID+_0x2b2d05(0x132);throw new Error('Locked');}}let patients=JSON[_0x2b2d05(0x17f)](localStorage[_0x2b2d05(0x185)](_0x2b2d05(0x150)))||[],clinics=JSON[_0x2b2d05(0x17f)](localStorage[_0x2b2d05(0x185)]('deskdoc_clinics'))||[],currentViewDate=new Date(),editId=null;function showPage(_0x27ead4){const _0x421e7f=_0x2b2d05;[_0x421e7f(0x148),'storagePage',_0x421e7f(0x197)][_0x421e7f(0x142)](_0x2d7e89=>document[_0x421e7f(0x15f)](_0x2d7e89)[_0x421e7f(0x119)][_0x421e7f(0x195)]='none'),document['getElementById'](_0x27ead4+_0x421e7f(0x196))['style'][_0x421e7f(0x195)]=_0x421e7f(0x140),[_0x421e7f(0x13e),_0x421e7f(0x133),'tab3']['forEach'](_0x1e3a42=>document['getElementById'](_0x1e3a42)['classList'][_0x421e7f(0x189)](_0x421e7f(0x186)));if(_0x27ead4===_0x421e7f(0x198))document['getElementById'](_0x421e7f(0x13e))['classList'][_0x421e7f(0x165)](_0x421e7f(0x186));_0x27ead4===_0x421e7f(0x187)&&(document[_0x421e7f(0x15f)]('tab2')[_0x421e7f(0x15b)]['add'](_0x421e7f(0x186)),renderStorage(),renderClinics()),_0x27ead4===_0x421e7f(0x11e)&&(document[_0x421e7f(0x15f)](_0x421e7f(0x12a))[_0x421e7f(0x15b)][_0x421e7f(0x165)](_0x421e7f(0x186)),renderBilling());}function addClinic(){const _0x17b671=_0x2b2d05,_0x1392fb=document['getElementById'](_0x17b671(0x12f))[_0x17b671(0x14d)][_0x17b671(0x167)]();_0x1392fb&&!clinics[_0x17b671(0x170)](_0x1392fb)&&(clinics[_0x17b671(0x137)](_0x1392fb),localStorage[_0x17b671(0x13a)]('deskdoc_clinics',JSON[_0x17b671(0x1ac)](clinics)),document['getElementById'](_0x17b671(0x12f))[_0x17b671(0x14d)]='',renderClinics());}function removeClinic(_0x37ebd6){const _0x2b363b=_0x2b2d05;confirm(_0x2b363b(0x164)+_0x37ebd6+'?')&&(clinics=clinics[_0x2b363b(0x1a5)](_0x219367=>_0x219367!==_0x37ebd6),localStorage[_0x2b363b(0x13a)](_0x2b363b(0x11b),JSON[_0x2b363b(0x1ac)](clinics)),renderClinics());}function renderClinics(){const _0x21bf17=_0x2b2d05,_0x54cbfb=document['getElementById'](_0x21bf17(0x146)),_0x1e2a85=document[_0x21bf17(0x15f)](_0x21bf17(0x13c)),_0x3a70f9=_0x54cbfb[_0x21bf17(0x14d)];_0x54cbfb[_0x21bf17(0x12c)]=_0x21bf17(0x19c)+clinics['map'](_0x37ba08=>'<option\x20value=\x22'+_0x37ba08+'\x22>'+_0x37ba08+_0x21bf17(0x171))[_0x21bf17(0x1a3)](''),_0x54cbfb[_0x21bf17(0x14d)]=_0x3a70f9,_0x1e2a85[_0x21bf17(0x12c)]=clinics[_0x21bf17(0x17d)](_0x406dab=>_0x21bf17(0x161)+_0x406dab+_0x21bf17(0x16e)+_0x406dab+_0x21bf17(0x152))[_0x21bf17(0x1a3)]('');}function savePatient(){const _0x334075=_0x2b2d05,_0x398e05={'clinic':document[_0x334075(0x15f)]('clinicSelect')[_0x334075(0x14d)]||_0x334075(0x18a),'name':document[_0x334075(0x15f)](_0x334075(0x120))[_0x334075(0x14d)],'phone':document[_0x334075(0x15f)](_0x334075(0x178))[_0x334075(0x14d)],'date':document[_0x334075(0x15f)](_0x334075(0x175))[_0x334075(0x14d)],'time':document['getElementById']('pTime')[_0x334075(0x14d)],'fee':parseFloat(document[_0x334075(0x15f)](_0x334075(0x18d))[_0x334075(0x14d)])||0x0,'paid':parseFloat(document['getElementById'](_0x334075(0x199))['value'])||0x0,'status':document[_0x334075(0x15f)](_0x334075(0x147))[_0x334075(0x14d)],'condition':document['getElementById'](_0x334075(0x17a))[_0x334075(0x14d)]};if(!_0x398e05['name']||!_0x398e05['date']){alert(_0x334075(0x1b3));return;}if(editId){const _0x433957=patients[_0x334075(0x16a)](_0xe5201d=>_0xe5201d['id']===editId);patients[_0x433957]={..._0x398e05,'id':editId},editId=null;}else patients[_0x334075(0x137)]({..._0x398e05,'id':Date[_0x334075(0x13f)]()});localStorage[_0x334075(0x13a)](_0x334075(0x150),JSON[_0x334075(0x1ac)](patients)),resetForm(),renderPatients(),buildCalendar();}function renderPatients(){const _0x51bbe6=_0x2b2d05,_0x117e06=document[_0x51bbe6(0x15f)](_0x51bbe6(0x117)),_0xe197e8=document[_0x51bbe6(0x15f)](_0x51bbe6(0x175))[_0x51bbe6(0x14d)],_0x5aab0e=patients[_0x51bbe6(0x1a5)](_0x56e61e=>_0x56e61e[_0x51bbe6(0x136)]===_0xe197e8);_0x117e06[_0x51bbe6(0x12c)]=_0x5aab0e[_0x51bbe6(0x151)]?_0x5aab0e[_0x51bbe6(0x17d)](_0x41254b=>_0x51bbe6(0x134)+_0x41254b['status']+'\x22>'+_0x41254b[_0x51bbe6(0x1ba)]+_0x51bbe6(0x184)+_0x41254b['time']+_0x51bbe6(0x14e)+_0x41254b[_0x51bbe6(0x1b4)]+_0x51bbe6(0x139)+_0x41254b['id']+_0x51bbe6(0x14a)+_0x41254b['id']+_0x51bbe6(0x193)+_0x41254b['id']+_0x51bbe6(0x1aa))[_0x51bbe6(0x1a3)](''):_0x51bbe6(0x1b8);}function openInvoice(_0x37d3ab){const _0x58aa26=_0x2b2d05,_0x46c878=patients[_0x58aa26(0x1bb)](_0xfe5b87=>_0xfe5b87['id']===_0x37d3ab);if(!_0x46c878)return;document[_0x58aa26(0x15f)](_0x58aa26(0x129))[_0x58aa26(0x1a1)]=_0x46c878[_0x58aa26(0x172)],document['getElementById'](_0x58aa26(0x17b))[_0x58aa26(0x1a1)]=_0x46c878[_0x58aa26(0x1b4)],document[_0x58aa26(0x15f)](_0x58aa26(0x155))[_0x58aa26(0x1a1)]=_0x46c878[_0x58aa26(0x143)]||_0x58aa26(0x157),document[_0x58aa26(0x15f)](_0x58aa26(0x18b))['innerText']=_0x46c878[_0x58aa26(0x136)],document[_0x58aa26(0x15f)]('inv-time')[_0x58aa26(0x1a1)]=_0x46c878[_0x58aa26(0x128)]||'--:--',document['getElementById'](_0x58aa26(0x14b))[_0x58aa26(0x1a1)]=_0x46c878['fee'],document['getElementById'](_0x58aa26(0x192))[_0x58aa26(0x1a1)]=_0x46c878['paid'],document['getElementById'](_0x58aa26(0x19e))['innerText']=_0x46c878[_0x58aa26(0x160)]-_0x46c878['paid'],document['getElementById'](_0x58aa26(0x173))[_0x58aa26(0x119)][_0x58aa26(0x195)]=_0x58aa26(0x140);}function _0x5331(){const _0x5dc5c4=['length','\x27)\x22\x20style=\x22background:var(--danger);\x20width:auto;\x20padding:2px\x208px;\x20font-size:10px;\x22>X</button></div>','App\x20Activated!','<div\x20class=\x22day\x20empty\x22></div>','inv-phone','body','N/A','removeItem','getMonth','2135161Wkzsmf','classList','11758190EJZesK','click','pTime','getElementById','fee','<div\x20style=\x22display:flex;\x20justify-content:space-between;\x20align-items:center;\x20background:#f9f9f9;\x20padding:8px\x2012px;\x20margin-bottom:5px;\x20border-radius:5px;\x20border:1px\x20solid\x20#eee;\x22><span>','toLowerCase','Update\x20Record','Remove\x20','add','deskdoc_dev_id','trim','totalCollected','totalCountDisplay','findIndex','day','<span\x20class=\x22apt-count\x22>','deskdoc_unlocked','</span><button\x20onclick=\x22removeClinic(\x27','getDate','includes','</option>','clinic','invoice-overlay','\x22,\x22','pDate','toString','8HVmAyr','pPhone','searchInput','pCondition','inv-name','true','map','toLocaleString','parse','padStart','billingList','9oZxADg','href','</span><br><strong>','getItem','active-tab','storage','15510AWGruA','remove','CLINIC\x20NAME','inv-date','</div>','pFee','Date,Time,Name,Fee,Paid,Status,Clinic\x0a','totalRevenue','930360EAkFcf','random','inv-paid',')\x22>Edit</button><button\x20class=\x22btn-action\x22\x20style=\x22background:var(--danger)\x22\x20onclick=\x22deleteEntry(','default','display','Page','billingPage','booking','pPaid','6008xwURfc','\x27)\x22>','<option\x20value=\x22\x22>--\x20Select\x20Clinic\x20--</option>','</span>','inv-due','DD-','setMonth','innerText','</b><br><small>','join','</small></div><div\x20style=\x22text-align:right\x22>Fee:\x20','filter','result','target','onload','</b></div><button\x20class=\x22btn-action\x22\x20style=\x22background:var(--success)\x22\x20onclick=\x22goToEdit(',')\x22>Del</button></div></div>','cancelEdit','stringify','condition','MAGN3T1C_2026_PRO','calendar','1252835AfFbzT','</small></div><button\x20class=\x22btn-action\x22\x20style=\x22background:var(--success)\x22\x20onclick=\x22goToEdit(','substring','Provide\x20Name\x20and\x20Date.','name','charCodeAt',')\x22>Edit</button></div>','has','<p\x20style=\x27text-align:center;color:#999\x27>No\x20entries.</p>','toISOString','status','find','patientList','data:text/csv;charset=utf-8,','style','reverse','deskdoc_clinics','readAsText','Success!','billing','saveBtn','pName','toUpperCase','<div\x20class=\x22','reload','split','none','<div\x20class=\x22item\x22><div\x20class=\x22item-info\x22><b>','\x20skipped).\x20Merge?','time','inv-clinic','tab3','files','innerHTML','<div\x20style=\x27height:100vh;\x20display:flex;\x20flex-direction:column;\x20align-items:center;\x20justify-content:center;\x20text-align:center;\x20padding:20px;\x20background:#2c3e50;\x20color:white;\x20font-family:sans-serif;\x27><h2>Unauthorized</h2><p>Invalid\x20key\x20for\x20Device\x20ID:\x20<b>','Imported\x20','newClinicInput','3156084DjUYOq','long','</b></p><p>Contact:\x20officialdeskdoc@gmail.com</p><button\x20onclick=\x27location.reload()\x27\x20style=\x27padding:10px\x2020px;\x20background:#3498db;\x20color:white;\x20border:none;\x20border-radius:5px;\x27>Try\x20Again</button></div>','tab2','<div\x20class=\x22item\x22><div\x20class=\x22item-info\x22><span\x20class=\x22status-tag\x20st-','fullDatabaseList','date','push','DANGER:\x20This\x20will\x20delete\x20ALL\x20patients\x20and\x20ALL\x20clinic\x20names\x20forever.\x20Are\x20you\x20sure?','</b></div><div\x20class=\x22action-btns\x22><button\x20class=\x22btn-action\x22\x20style=\x22background:var(--accent)\x22\x20onclick=\x22openInvoice(','setItem','totalDues','clinicList','valueAsDate','tab1','now','block','\x20records.\x20(','forEach','phone','monthDisplay','\x0aEnter\x20Key:','clinicSelect','pStatus','bookingPage','45ROLsYP',')\x22>Invoice</button><button\x20class=\x22btn-action\x22\x20style=\x22background:var(--success)\x22\x20onclick=\x22goToEdit(','inv-fee','DESKDOC\x20LICENSING\x0aDevice\x20ID:\x20','value','</strong>\x20|\x20<b>','paid','pt_patients'];_0x5331=function(){return _0x5dc5c4;};return _0x5331();}function closeInvoice(){const _0x188510=_0x2b2d05;document[_0x188510(0x15f)](_0x188510(0x173))[_0x188510(0x119)][_0x188510(0x195)]=_0x188510(0x125);}function renderBilling(){const _0x3baca8=_0x2b2d05;let _0x3422c6=0x0,_0x1b448e=0x0;document[_0x3baca8(0x15f)](_0x3baca8(0x181))[_0x3baca8(0x12c)]=patients[_0x3baca8(0x17d)](_0x4de2fc=>{const _0x578b45=_0x3baca8;return _0x3422c6+=_0x4de2fc[_0x578b45(0x160)],_0x1b448e+=_0x4de2fc['paid'],'<div\x20class=\x22item\x22><div\x20class=\x22item-info\x22><b>'+_0x4de2fc[_0x578b45(0x1b4)]+_0x578b45(0x1a2)+_0x4de2fc[_0x578b45(0x136)]+_0x578b45(0x1a4)+_0x4de2fc['fee']+'<br>Paid:\x20'+_0x4de2fc[_0x578b45(0x14f)]+'</div></div>';})[_0x3baca8(0x1a3)](''),document[_0x3baca8(0x15f)](_0x3baca8(0x18f))[_0x3baca8(0x1a1)]=_0x3422c6,document[_0x3baca8(0x15f)](_0x3baca8(0x168))['innerText']=_0x1b448e,document[_0x3baca8(0x15f)](_0x3baca8(0x13b))[_0x3baca8(0x1a1)]=_0x3422c6-_0x1b448e;}function buildCalendar(){const _0x5675dd=_0x2b2d05,_0x12268f=document[_0x5675dd(0x15f)](_0x5675dd(0x1af)),_0x2bbb22=currentViewDate['getFullYear'](),_0x1c7a02=currentViewDate[_0x5675dd(0x159)]();document[_0x5675dd(0x15f)](_0x5675dd(0x144))['innerText']=currentViewDate[_0x5675dd(0x17e)](_0x5675dd(0x194),{'month':_0x5675dd(0x131),'year':'numeric'});const _0xc9aaad=new Date(_0x2bbb22,_0x1c7a02,0x1)['getDay'](),_0x106cbe=new Date(_0x2bbb22,_0x1c7a02+0x1,0x0)[_0x5675dd(0x16f)](),_0xd61652=document[_0x5675dd(0x15f)](_0x5675dd(0x175))[_0x5675dd(0x14d)],_0x5789ac=new Date()[_0x5675dd(0x1b9)]()[_0x5675dd(0x124)]('T')[0x0];let _0x477446='';for(let _0x13a34c=0x0;_0x13a34c<_0xc9aaad;_0x13a34c++)_0x477446+=_0x5675dd(0x154);for(let _0x5f1969=0x1;_0x5f1969<=_0x106cbe;_0x5f1969++){const _0x3c6c2b=_0x2bbb22+'-'+String(_0x1c7a02+0x1)['padStart'](0x2,'0')+'-'+String(_0x5f1969)[_0x5675dd(0x180)](0x2,'0'),_0x581dda=patients[_0x5675dd(0x1a5)](_0x5002a1=>_0x5002a1[_0x5675dd(0x136)]===_0x3c6c2b)['length'];let _0x1ef30e=_0x5675dd(0x16b);if(_0x3c6c2b===_0x5789ac)_0x1ef30e+='\x20today';if(_0x3c6c2b===_0xd61652)_0x1ef30e+='\x20selected-day';_0x477446+=_0x5675dd(0x122)+_0x1ef30e+'\x22\x20onclick=\x22selectDate(\x27'+_0x3c6c2b+_0x5675dd(0x19b)+_0x5f1969+(_0x581dda>0x0?_0x5675dd(0x16c)+_0x581dda+_0x5675dd(0x19d):'')+_0x5675dd(0x18c);}_0x12268f['innerHTML']=_0x477446;}function selectDate(_0x4ba625){const _0x1bcf4e=_0x2b2d05;document[_0x1bcf4e(0x15f)](_0x1bcf4e(0x175))[_0x1bcf4e(0x14d)]=_0x4ba625,buildCalendar(),renderPatients();}function jumpToDate(_0x501e56){const _0x3a6c57=_0x2b2d05;if(!_0x501e56)return;const [_0x2a013f,_0x4b01bb]=_0x501e56[_0x3a6c57(0x124)]('-');currentViewDate=new Date(_0x2a013f,_0x4b01bb-0x1,0x1),buildCalendar();}function syncCalendarWithPicker(_0x890ee1){if(!_0x890ee1)return;const _0x11c5df=new Date(_0x890ee1);currentViewDate=new Date(_0x11c5df['getFullYear'](),_0x11c5df['getMonth'](),0x1),buildCalendar();}function resetForm(){const _0x1fbfcf=_0x2b2d05;editId=null,['pName','pPhone',_0x1fbfcf(0x18d),_0x1fbfcf(0x199),_0x1fbfcf(0x17a),_0x1fbfcf(0x15e)][_0x1fbfcf(0x142)](_0x682dc8=>document[_0x1fbfcf(0x15f)](_0x682dc8)[_0x1fbfcf(0x14d)]=''),document[_0x1fbfcf(0x15f)](_0x1fbfcf(0x146))['value']='',document[_0x1fbfcf(0x15f)](_0x1fbfcf(0x11f))['innerText']='Save\x20to\x20Deskdoc',document[_0x1fbfcf(0x15f)](_0x1fbfcf(0x1ab))[_0x1fbfcf(0x119)][_0x1fbfcf(0x195)]='none';}function goToEdit(_0xedea7f){const _0x5bf463=_0x2b2d05;editId=_0xedea7f;const _0x5a3dfa=patients[_0x5bf463(0x1bb)](_0x1af5d1=>_0x1af5d1['id']===_0xedea7f);document[_0x5bf463(0x15f)](_0x5bf463(0x146))[_0x5bf463(0x14d)]=_0x5a3dfa[_0x5bf463(0x172)]||'',document[_0x5bf463(0x15f)](_0x5bf463(0x120))['value']=_0x5a3dfa['name'],document[_0x5bf463(0x15f)](_0x5bf463(0x178))['value']=_0x5a3dfa['phone'],document['getElementById'](_0x5bf463(0x175))[_0x5bf463(0x14d)]=_0x5a3dfa[_0x5bf463(0x136)],document[_0x5bf463(0x15f)](_0x5bf463(0x15e))['value']=_0x5a3dfa[_0x5bf463(0x128)],document['getElementById'](_0x5bf463(0x18d))[_0x5bf463(0x14d)]=_0x5a3dfa['fee'],document[_0x5bf463(0x15f)](_0x5bf463(0x199))[_0x5bf463(0x14d)]=_0x5a3dfa['paid'],document[_0x5bf463(0x15f)](_0x5bf463(0x147))[_0x5bf463(0x14d)]=_0x5a3dfa['status'],document[_0x5bf463(0x15f)]('pCondition')[_0x5bf463(0x14d)]=_0x5a3dfa[_0x5bf463(0x1ad)],document[_0x5bf463(0x15f)](_0x5bf463(0x11f))[_0x5bf463(0x1a1)]=_0x5bf463(0x163),document['getElementById'](_0x5bf463(0x1ab))[_0x5bf463(0x119)][_0x5bf463(0x195)]=_0x5bf463(0x140),window['scrollTo'](0x0,0x0),showPage(_0x5bf463(0x198));}function deleteEntry(_0x4e729f){const _0x21e370=_0x2b2d05;confirm('Delete?')&&(patients=patients[_0x21e370(0x1a5)](_0x998605=>_0x998605['id']!==_0x4e729f),localStorage[_0x21e370(0x13a)]('pt_patients',JSON[_0x21e370(0x1ac)](patients)),renderPatients(),renderStorage(),buildCalendar());}function renderStorage(){const _0x191fd7=_0x2b2d05;document[_0x191fd7(0x15f)](_0x191fd7(0x169))[_0x191fd7(0x1a1)]=patients[_0x191fd7(0x151)],document[_0x191fd7(0x15f)](_0x191fd7(0x135))[_0x191fd7(0x12c)]=patients[_0x191fd7(0x17d)](_0x5eecc1=>_0x191fd7(0x126)+_0x5eecc1[_0x191fd7(0x1b4)]+_0x191fd7(0x1a2)+_0x5eecc1[_0x191fd7(0x143)]+_0x191fd7(0x1b1)+_0x5eecc1['id']+_0x191fd7(0x1b6))[_0x191fd7(0x1a3)]('');}function applyFilters(){const _0x398113=_0x2b2d05,_0x5df0c3=document[_0x398113(0x15f)](_0x398113(0x179))[_0x398113(0x14d)][_0x398113(0x162)]();document[_0x398113(0x15f)](_0x398113(0x135))[_0x398113(0x12c)]=patients[_0x398113(0x1a5)](_0x24efb6=>_0x24efb6[_0x398113(0x1b4)][_0x398113(0x162)]()[_0x398113(0x170)](_0x5df0c3))[_0x398113(0x17d)](_0x32dbe4=>_0x398113(0x126)+_0x32dbe4['name']+_0x398113(0x1a9)+_0x32dbe4['id']+_0x398113(0x1b6))[_0x398113(0x1a3)]('');}function exportToCSV(){const _0xde073=_0x2b2d05;let _0x504bd3=_0xde073(0x18e)+patients[_0xde073(0x17d)](_0x4e81a7=>_0x4e81a7['date']+','+_0x4e81a7[_0xde073(0x128)]+',\x22'+_0x4e81a7[_0xde073(0x1b4)]+'\x22,'+_0x4e81a7['fee']+','+_0x4e81a7['paid']+',\x22'+_0x4e81a7['status']+_0xde073(0x174)+_0x4e81a7[_0xde073(0x172)]+'\x22')[_0xde073(0x1a3)]('\x0a');const _0x360334=document['createElement']('a');_0x360334[_0xde073(0x183)]=_0xde073(0x118)+encodeURI(_0x504bd3),_0x360334['download']='Deskdoc_Export.csv',_0x360334[_0xde073(0x15d)]();}function _0x3eca(_0x9548e7,_0x37b562){_0x9548e7=_0x9548e7-0x117;const _0x5331ab=_0x5331();let _0x3ecab4=_0x5331ab[_0x9548e7];return _0x3ecab4;}function importFromCSV(_0xb2c667){const _0x4fc23f=_0x2b2d05,_0x7b48a8=_0xb2c667[_0x4fc23f(0x1a7)][_0x4fc23f(0x12b)][0x0];if(!_0x7b48a8)return;const _0x51883a=new FileReader();_0x51883a[_0x4fc23f(0x1a8)]=function(_0x4c8167){const _0x1d8b1e=_0x4fc23f,_0x512d16=_0x4c8167[_0x1d8b1e(0x1a7)][_0x1d8b1e(0x1a6)][_0x1d8b1e(0x124)]('\x0a');if(_0x512d16[_0x1d8b1e(0x151)]<0x2)return;const _0x3980ad=new Set(patients[_0x1d8b1e(0x17d)](_0x520079=>_0x520079[_0x1d8b1e(0x1b4)][_0x1d8b1e(0x162)]()+'|'+_0x520079[_0x1d8b1e(0x136)]+'|'+_0x520079[_0x1d8b1e(0x128)])),_0xcc216d=[];let _0x5c75d3=0x0;for(let _0x49fa7f=0x1;_0x49fa7f<_0x512d16[_0x1d8b1e(0x151)];_0x49fa7f++){const _0x5a0596=_0x512d16[_0x49fa7f][_0x1d8b1e(0x124)](/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);if(_0x5a0596[_0x1d8b1e(0x151)]<0x6)continue;const _0x51ed59=_0x5a0596[0x2]['replace'](/"/g,'')[_0x1d8b1e(0x167)](),_0x1d61cd=_0x5a0596[0x0][_0x1d8b1e(0x167)](),_0x48427d=_0x5a0596[0x1][_0x1d8b1e(0x167)](),_0x252a7a=_0x51ed59[_0x1d8b1e(0x162)]()+'|'+_0x1d61cd+'|'+_0x48427d;_0x3980ad[_0x1d8b1e(0x1b7)](_0x252a7a)?_0x5c75d3++:(_0xcc216d[_0x1d8b1e(0x137)]({'id':Date['now']()+Math[_0x1d8b1e(0x191)](),'date':_0x1d61cd,'time':_0x48427d,'name':_0x51ed59,'fee':parseFloat(_0x5a0596[0x3])||0x0,'paid':parseFloat(_0x5a0596[0x4])||0x0,'status':_0x5a0596[0x5]['replace'](/"/g,'')[_0x1d8b1e(0x167)](),'clinic':_0x5a0596[0x6]?_0x5a0596[0x6]['replace'](/"/g,'')[_0x1d8b1e(0x167)]():_0x1d8b1e(0x18a),'phone':'','condition':''}),_0x3980ad[_0x1d8b1e(0x165)](_0x252a7a));}_0xcc216d[_0x1d8b1e(0x151)]>0x0&&(confirm(_0x1d8b1e(0x12e)+_0xcc216d[_0x1d8b1e(0x151)]+_0x1d8b1e(0x141)+_0x5c75d3+_0x1d8b1e(0x127))&&(patients=[...patients,..._0xcc216d],localStorage[_0x1d8b1e(0x13a)](_0x1d8b1e(0x150),JSON[_0x1d8b1e(0x1ac)](patients)),buildCalendar(),renderPatients(),renderStorage(),alert(_0x1d8b1e(0x11d))));},_0x51883a[_0x4fc23f(0x11c)](_0x7b48a8),_0xb2c667[_0x4fc23f(0x1a7)][_0x4fc23f(0x14d)]='';}function factoryReset(){const _0x480ad8=_0x2b2d05;confirm(_0x480ad8(0x138))&&(confirm('FINAL\x20CONFIRMATION:\x20Are\x20you\x20really\x20sure?\x20This\x20cannot\x20be\x20undone.')&&(localStorage[_0x480ad8(0x158)](_0x480ad8(0x150)),localStorage[_0x480ad8(0x158)]('deskdoc_clinics'),patients=[],clinics=[],location[_0x480ad8(0x123)]()));}function changeMonth(_0x313ed0){const _0xf29e07=_0x2b2d05;currentViewDate[_0xf29e07(0x1a0)](currentViewDate[_0xf29e07(0x159)]()+_0x313ed0),buildCalendar();}function refreshApp(){const _0x31d4ba=_0x2b2d05;currentViewDate=new Date(),document[_0x31d4ba(0x15f)](_0x31d4ba(0x175))[_0x31d4ba(0x13d)]=new Date(),buildCalendar(),renderPatients();}document[_0x2b2d05(0x15f)](_0x2b2d05(0x175))[_0x2b2d05(0x13d)]=new Date(),renderClinics(),buildCalendar(),renderPatients();
</script>
</body>
</html>





